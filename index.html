<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Z-Vision : First Person Survivor</title>
    <style>
        body {
            margin: 0;
            background-color: #000;
            color: #fff;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            user-select: none;
        }

        /* Vue à la première personne */
        #viewport {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: url('https://images.unsplash.com/photo-1505672678657-cc7037095e60?q=80&w=2000') no-repeat center center;
            background-size: cover;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: crosshair;
        }

        /* Overlay sombre pour l'ambiance */
        #overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 30%, rgba(0,0,0,0.8) 100%);
            pointer-events: none;
        }

        /* Le Viseur */
        #crosshair {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px solid rgba(255, 0, 0, 0.5);
            border-radius: 50%;
            pointer-events: none;
        }
        #crosshair::before, #crosshair::after {
            content: '';
            position: absolute;
            background: red;
        }
        #crosshair::before { top: 50%; left: 0; width: 100%; height: 1px; }
        #crosshair::after { left: 50%; top: 0; width: 1px; height: 100%; }

        /* Les Zombies (Cibles) */
        .zombie {
            position: absolute;
            width: 100px;
            height: 150px;
            background: url('https://img.icons8.com/ios-filled/200/730000/zombie-hand.png') no-repeat center;
            background-size: contain;
            transition: transform 0.1s;
            filter: drop-shadow(0 0 10px #f00);
            cursor: pointer;
        }

        /* UI de survie */
        #ui {
            position: absolute;
            bottom: 30px;
            left: 30px;
            text-shadow: 2px 2px #000;
        }

        .stat { font-size: 24px; margin-bottom: 10px; }
        .hp-bar { width: 200px; height: 20px; border: 2px solid #fff; background: #300; }
        #hp-fill { width: 100%; height: 100%; background: #f00; transition: width 0.3s; }

        #score-board {
            position: absolute;
            top: 30px;
            right: 30px;
            font-size: 30px;
            color: #ff0;
        }

        #flash {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: white;
            opacity: 0;
            pointer-events: none;
        }

        /* Animation de tir */
        .recoil { animation: shake 0.1s; }
        @keyframes shake {
            0% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0); }
        }
    </style>
</head>
<body onclick="shoot()">

    <div id="viewport">
        <div id="overlay"></div>
        <div id="flash"></div>
        <div id="crosshair"></div>
        
        <div id="ui">
            <div class="stat">SANTÉ DU SURVIVANT</div>
            <div class="hp-bar"><div id="hp-fill"></div></div>
            <div class="stat" style="margin-top: 10px;">MUNITIONS: <span id="ammo">12</span></div>
        </div>

        <div id="score-board">KILLS: <span id="kills">0</span></div>
    </div>

<script>
    let hp = 100;
    let ammo = 12;
    let kills = 0;
    let gameActive = true;

    // Suivre la souris pour le viseur
    const viewport = document.getElementById('viewport');
    const crosshair = document.getElementById('crosshair');
    
    window.addEventListener('mousemove', (e) => {
        crosshair.style.left = (e.clientX - 20) + 'px';
        crosshair.style.top = (e.clientY - 20) + 'px';
    });

    // Système de tir
    function shoot() {
        if (!gameActive || ammo <= 0) return;

        ammo--;
        document.getElementById('ammo').innerText = ammo;
        
        // Effet visuel de tir
        const flash = document.getElementById('flash');
        flash.style.opacity = '0.3';
        setTimeout(() => flash.style.opacity = '0', 50);
        viewport.classList.add('recoil');
        setTimeout(() => viewport.classList.remove('recoil'), 100);

        if (ammo === 0) {
            setTimeout(() => { ammo = 12; document.getElementById('ammo').innerText = ammo; }, 1500); // Recharge auto
        }
    }

    // Apparition des zombies
    function spawnZombie() {
        if (!gameActive) return;

        const zombie = document.createElement('div');
        zombie.className = 'zombie';
        
        // Position aléatoire
        const x = Math.random() * (window.innerWidth - 100);
        const y = Math.random() * (window.innerHeight - 200) + 100;
        
        zombie.style.left = x + 'px';
        zombie.style.top = y + 'px';
        zombie.style.transform = 'scale(0.1)'; // Commence loin

        zombie.onclick = (e) => {
            e.stopPropagation(); // Empêche de compter comme un tir dans le vide
            if (ammo > 0) {
                kills++;
                document.getElementById('kills').innerText = kills;
                zombie.remove();
            }
        };

        viewport.appendChild(zombie);

        // Le zombie s'approche (grossit)
        let size = 0.1;
        const approach = setInterval(() => {
            size += 0.01;
            zombie.style.transform = `scale(${size})`;
            
            if (size >= 1.5) { // Le zombie vous a atteint
                clearInterval(approach);
                takeDamage();
                zombie.remove();
            }
        }, 50);
    }

    function takeDamage() {
        hp -= 20;
        document.getElementById('hp-fill').style.width = hp + '%';
        if (hp <= 0) {
            gameActive = false;
            alert("VOUS AVEZ ÉTÉ INFECTÉ. Score final : " + kills);
            location.reload();
        }
    }

    // Lancer le jeu
    setInterval(spawnZombie, 2000); // Un zombie toutes les 2 secondes

</script>
</body>
</html>
